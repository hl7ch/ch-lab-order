<Bundle xmlns="http://hl7.org/fhir">
  <id value="referral-1-tvt" />
  <meta>
    <versionId value="1" />
    <lastUpdated value="2019-04-01T20:18:41.341+00:00" />
    <profile value="http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-document" />
  </meta>
  <identifier>
    <system value="http://test.fhir.ch/id/uuid" />
    <value value="26d3dff7-ab05-4737-a49c-5eccd33595f8" />
  </identifier>
  <type value="document" />
  <timestamp value="2019-04-01T20:18:41.341+00:00" />
  <!-- 1st Entry: Composistion-->
  <entry>
    <fullUrl value="http://test.fhir.ch/r4/Composition/referral-1-tvt" />
    <resource>
      <Composition xmlns="http://hl7.org/fhir">
        <id value="referral-1-TVT" />
        <meta>
          <profile value="http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-composition" />
        </meta>
        <text>
          <status value="generated" />
          <div xmlns="http://www.w3.org/1999/xhtml">
                    Referral 1-TVT
                </div>
        </text>
        <!--
            <extension url="">
                <valueString value="" />
            </extension>
            -->
        <identifier>
          <system value="http://test.fhir.ch/id/uuid" />
          <value value="26d3dff7-ab05-4737-a49c-5eccd33595f7" />
        </identifier>
        <status value="final" />
        <type>
          <!-- 
                <coding>
                    <system value="" />
                    <code value="" />
                </coding>
            -->
          <text value="Referral 1-TVT" />
        </type>
        <subject>
          <reference value="Patient/FranzMuster" />
        </subject>
        <date value="2019-03-31T11:46:09+02:00" />
        <author>
          <reference value="Practitioner/AgparMarc" />
        </author>
        <title value="Referral 1-TVT" />
        <attester>
          <mode value="professional" />
          <time value="2010-03-12T11:46:09+02:00" />
          <party>
            <reference value="Practitioner/AgparMarc" />
          </party>
        </attester>
        <section>
          <title value="Referral" />
          <entry>
            <reference value="Questionnaire/referral-1-TVT" />
          </entry>
          <entry>
            <reference value="QuestionnaireResponse/referral-1-TVT" />
          </entry>
          <entry>
            <reference value="ServiceRequest/referral-1-TVT" />
          </entry>
        </section>
      </Composition>
    </resource>
  </entry>
  <!-- ch-core-Patient -->
  <entry>
    <fullUrl value="http://test.fhir.ch/r4/Patient/HansGuggindieluft" />
    <resource>
      <Patient xmlns="http://hl7.org/fhir">
        <id value="HansGuggindieluft" />
        <meta>
          <versionId value="1" />
          <lastUpdated value="2019-04-01T20:14:17.451+00:00" />
          <profile value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-core-patient" />
        </meta>
        <text>
          <status value="generated" />
          <div xmlns="http://www.w3.org/1999/xhtml">
            <p>
              <b>Generated Narrative with Details</b>
            </p>
            <p>
              <b>id</b>
              : FranzMuster
            </p>
            <p>
              <b>meta</b>
              :
            </p>
            <p>
              <b>identifier</b>
              : 012/08.111111
            </p>
            <p>
              <b>name</b>
              : Franz Muster
            </p>
            <p>
              <b>gender</b>
              : MALE
            </p>
            <p>
              <b>birthDate</b>
              : Jan 27, 1995
            </p>
            <p>
              <b>maritalStatus</b>
              : in eingetragener Partnerschaft
              <span style="background: LightGoldenRodYellow">(Details : {http://fhir.ch/ig/ch-core/CodeSystem/ech-11-maritalstatus code '6' = '6', given as 'in eingetragener Partnerschaft'})</span>
            </p>
            <h3>Communications</h3>
            <table class="grid">
              <tr>
                <td>-</td>
                <td>
                  <b>Language</b>
                </td>
                <td>
                  <b>Preferred</b>
                </td>
              </tr>
              <tr>
                <td>*</td>
                <td>
                  Deutsch (Schweiz)
                  <span style="background: LightGoldenRodYellow">(Details : {urn:ietf:bcp:47 code 'de-CH' = 'German (Region=Switzerland))</span>
                </td>
                <td>true</td>
              </tr>
            </table>
          </div>
        </text>
        <extension url="http://fhir.ch/ig/ch-core/StructureDefinition/ch-core-patient-ech-11-placeofbirth">
          <valueAddress>
            <city value="Paris" />
            <country value="Frankreich" />
          </valueAddress>
        </extension>
        <extension url="http://fhir.ch/ig/ch-core/StructureDefinition/ch-core-patient-ech-11-placeoforigin">
          <valueAddress>
            <city value="Köniz" />
            <state value="BE" />
          </valueAddress>
        </extension>
        <extension url="http://fhir.ch/ig/ch-core/StructureDefinition/ch-core-patient-religion">
          <valueCodeableConcept>
            <coding>
              <system value="http://fhir.ch/ig/ch-core/CodeSystem/ech-11-religion" />
              <code value="111" />
              <display value="evangelisch-reformierte (protestantische) Kirche" />
            </coding>
            <coding>
              <system value="http://terminology.hl7.org/CodeSystem/v3-ReligiousAffiliation" />
              <code value="1077" />
              <display value="Protestant" />
            </coding>
          </valueCodeableConcept>
        </extension>
        <identifier>
          <system value="urn:oid:2.16.756.5.30.999999.1" />
          <value value="012/08.111111" />
        </identifier>
        <name>
          <family value="Muster" />
          <given value="Franz" />
        </name>
        <gender value="male" />
        <birthDate value="1995-01-27" />
        <maritalStatus>
          <coding>
            <system value="http://fhir.ch/ig/ch-core/CodeSystem/ech-11-maritalstatus" />
            <code value="6" />
            <display value="in eingetragener Partnerschaft" />
          </coding>
        </maritalStatus>
        <communication>
          <language>
            <coding>
              <system value="urn:ietf:bcp:47" />
              <code value="de-CH" />
            </coding>
            <text value="Deutsch (Schweiz)" />
          </language>
          <preferred value="true" />
        </communication>
      </Patient>
    </resource>
  </entry>
  <!--  practitioner -->
  <entry>
    <fullUrl value="http://test.fhir.ch/r4/Practitioner/MarcMustermann" />
    <resource>
      <Practitioner xmlns="http://hl7.org/fhir">
        <id value="MarcMustermann" />
        <meta>
          <profile value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-core-practitioner" />
        </meta>
        <identifier>
          <system value="urn:oid:2.51.1.3" />
          <value value="7601000050702" />
        </identifier>
        <name>
          <family value="Mustermann" />
          <given value="Marc" />
        </name>
      </Practitioner>
    </resource>
  </entry>
  <!-- questionnaire -->
  <entry>
    <fullUrl value="http://test.fhir.ch/r4/Questionnaire/referral-1-tvt" />
    <resource>
      <Questionnaire xmlns="http://hl7.org/fhir">
        <id value="referral-1-tvt" />
        <meta>
          <profile value="http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-questionnaire" />
        </meta>
        <text>
          <status value="generated" />
          <div xmlns="http://www.w3.org/1999/xhtml">
            Lab Order Questionnarie Example for TVT
            <pre>todo copy text out of rendering</pre>
          </div>
        </text>
        <extension url="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-targetStructureMap">
          <valueCanonical value="http://fhir.ch/ig/ch-orf/StructureMap/map-orf" />
        </extension>
        <url value="http://fhir.ch/ig/ch-orf/Questionnaire/referral-1-tvt" />
        <name value="LabOrderExample" />
        <title value="Lab Order Example" />
        <status value="draft" />
        <experimental value="true" />
        <subjectType value="Patient" />
        <date value="2018-04-12" />
        <publisher value="eHealth Suisse" />
        <!-- item Lab Order Questionnarie Example for TVT -->
        <item>
          <linkId value="info" />
          <text value="Lab Order Questionnarie Example for TVT" />
          <type value="display" />
        </item>
        <!-- item order -->
        <item>
          <linkId value="order" />
          <text value="Auftrag" />
          <type value="group" />
          <item>
            <linkId value="order.date" />
            <text value="Auftrags-Datum" />
            <type value="date" />
          </item>
        </item>
        <!-- item orderer -->
        <item>
          <linkId value="orderer" />
          <text value="Auftraggeber" />
          <type value="group" />
          <item>
            <linkId value="orderer.author" />
            <text value="Author" />
            <type value="group" />
            <item>
              <linkId value="orderer.author.visum" />
              <text value="Visum" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.author.organization" />
              <text value="Organisation" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.author.lastname" />
              <text value="Name" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.author.firstname" />
              <text value="Vorname" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.author.tel" />
              <text value="Telefon" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.author.e-mail" />
              <text value="E-Mail" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.author.street" />
              <text value="Strasse" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.author.postfach" />
              <text value="Postfach" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.author.zip" />
              <text value="PLZ" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.author.city" />
              <text value="Ort" />
              <type value="string" />
            </item>
          </item>
          <item>
            <linkId value="orderer.dataenterer" />
            <text value="Erfasser" />
            <type value="group" />
            <item>
              <linkId value="orderer.dataenterer.visum" />
              <text value="Visum" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.dataenterer.organization" />
              <text value="Organisation" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.dataenterer.lastname" />
              <code>
                <system value="http://tbd" />
                <code value="datlname" />
              </code>
              <text value="Name" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.dataenterer.firstname" />
              <definition value="http://fhir.ch/ig/ch-orf/StructureDefinition/QRFDataEntryPerson#Practitioner.name.first" />
              <text value="Vorname" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.dataenterer.tel" />
              <text value="Telefon" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.dataenterer.e-mail" />
              <text value="E-Mail" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.dataenterer.street" />
              <text value="Strasse" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.dataenterer.postfach" />
              <text value="Postfach" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.dataenterer.zip" />
              <text value="PLZ" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.dataenterer.city" />
              <text value="Ort" />
              <type value="string" />
            </item>
          </item>
          <item>
            <linkId value="orderer.notcontactthisdoc" />
            <text value="Urgent Notification Contact for this document:" />
            <type value="group" />
            <item>
              <linkId value="orderer.notifcontactthisdoc.visum" />
              <text value="Visum" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactthisdoc.organization" />
              <text value="Organisation" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactthisdoc.lastname" />
              <text value="Name" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactthisdoc.firstname" />
              <text value="Vorname" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactthisdoc.tel" />
              <text value="Telefon" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactthisdoc.e-mail" />
              <text value="E-Mail" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactthisdoc.street" />
              <text value="Strasse" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactthisdoc.postfach" />
              <text value="Postfach" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactthisdoc.zip" />
              <text value="PLZ" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactthisdoc.city" />
              <text value="Ort" />
              <type value="string" />
            </item>
          </item>
          <item>
            <linkId value="orderer.notcontactresponsedoc" />
            <text value="Urgent Notification Contact for the response of this document:" />
            <type value="group" />
            <item>
              <linkId value="orderer.notifcontactresponsedoc.visum" />
              <text value="Visum" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactresponsedoc.organization" />
              <text value="Organisation" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactresponsedoc.lastname" />
              <text value="Name" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactresponsedoc.firstname" />
              <text value="Vorname" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactresponsedoc.tel" />
              <text value="Telefon" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactresponsedoc.e-mail" />
              <text value="E-Mail" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactresponsedoc.street" />
              <text value="Strasse" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactresponsedoc.postfach" />
              <text value="Postfach" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactresponsedoc.zip" />
              <text value="PLZ" />
              <type value="string" />
            </item>
            <item>
              <linkId value="orderer.notifcontactresponsedoc.city" />
              <text value="Ort" />
              <type value="string" />
            </item>
          </item>
        </item>
        <!-- item receiver -->
        <item>
          <linkId value="receiver" />
          <text value="Receiver" />
          <type value="group" />
          <item>
            <linkId value="receiver.visum" />
            <text value="Visum" />
            <type value="string" />
          </item>
          <item>
            <linkId value="receiver.bereich" />
            <text value="Bereich" />
            <type value="string" />
          </item>
          <item>
            <linkId value="receiver.abt" />
            <text value="Bereich" />
            <type value="string" />
          </item>
          <item>
            <linkId value="receiver.lastname" />
            <text value="Name" />
            <type value="string" />
          </item>
          <item>
            <linkId value="receiver.firstname" />
            <text value="Vorname" />
            <type value="string" />
          </item>
          <item>
            <linkId value="receiver.tel" />
            <text value="Telefon" />
            <type value="string" />
          </item>
          <item>
            <linkId value="receiver.e-mail" />
            <text value="E-Mail" />
            <type value="string" />
          </item>
          <item>
            <linkId value="receiver.cstreet" />
            <text value="Strasse" />
            <type value="string" />
          </item>
          <item>
            <linkId value="receiver.postfach" />
            <text value="Postfach" />
            <type value="string" />
          </item>
          <item>
            <linkId value="receiver.zip" />
            <text value="PLZ" />
            <type value="string" />
          </item>
          <item>
            <linkId value="receiver.city" />
            <text value="Ort" />
            <type value="string" />
          </item>
        </item>
        <!-- patient -->
        <item>
          <linkId value="patient" />
          <text value="Patient" />
          <type value="group" />
          <item>
            <linkId value="patient.lastname" />
            <definition value="http://hl7.org/fhir/StructureDefinition/Patient#Patient.name.given" />
            <text value="Name" />
            <type value="string" />
          </item>
          <item>
            <linkId value="patient.firstname" />
            <definition value="http://hl7.org/fhir/StructureDefinition/Patient#Patient.name.first" />
            <text value="Vorname" />
            <type value="string" />
          </item>
          <item>
            <linkId value="patient.pid" />
            <text value="PID (sendendes System)" />
            <type value="string" />
          </item>
          <item>
            <linkId value="patient.birthdate" />
            <text value="Geburtsdatum" />
            <type value="date" />
          </item>
          <item>
            <linkId value="patient.sex" />
            <text value="Geschlecht" />
            <type value="choice" />
            <answerOption>
              <valueString value="M" />
            </answerOption>
            <answerOption>
              <valueString value="F" />
            </answerOption>
          </item>
          <item>
            <linkId value="patient.amborstat" />
            <text value="Amb/Stat" />
            <type value="choice" />
            <answerOption>
              <valueString value="Amb" />
            </answerOption>
            <answerOption>
              <valueString value="Stat" />
            </answerOption>
          </item>
        </item>
        <!-- Auto Differential panel - Blood -->
        <item>
          <linkId value="hematology" />
          <text value="Hematology" />
          <type value="choice" />
          <item>
            <linkId value="lab" />
            <text value="Laborwerte" />
            <type value="string" />
            <answerOption>
              <valueCoding>
                <system value="http://loinc.org" />
                <code value="24360-0" />
                <display value="Hemoglobin and Hematocrit panel - Blood" />
              </valueCoding>
            </answerOption>
            <answerOption>
              <valueCoding>
                <system value="http://loinc.org" />
                <code value="43113-0" />
                <display value="Hemoglobin electrophoresis panel in Blood" />
              </valueCoding>
            </answerOption>
            <answerOption>
              <valueCoding>
                <system value="http://loinc.org" />
                <code value="57021-8" />
                <display value="CBC W Auto Differential panel - Blood" />
              </valueCoding>
            </answerOption>
            <answerOption>
              <valueCoding>
                <system value="http://loinc.org" />
                <code value="58410-2" />
                <display value="CBC panel - Blood by Automated count" />
              </valueCoding>
            </answerOption>
            <answerOption>
              <valueCoding>
                <system value="http://loinc.org" />
                <code value="57023-4" />
                <display value="Auto Differential panel - Blood" />
              </valueCoding>
            </answerOption>
          </item>
        </item>
        <!-- D-Dimer -->
        <item>
          <linkId value="coagulation" />
          <text value="Coagulation" />
          <type value="choice" />
          <item>
            <linkId value="lab" />
            <text value="Laborwerte" />
            <type value="string" />
            <answerOption>
              <valueCoding>
                <system value="http://loinc.org" />
                <code value="55398-2" />
                <display value="Short Fibrin D-dimer FEU and DDU panel - Platelet poor plasma" />
              </valueCoding>
            </answerOption>
          </item>
        </item>
        <!-- CRP C reactive Protein-->
        <item>
          <linkId value="clinical_chemistry" />
          <text value="Klinische Chemie" />
          <type value="choice" />
          <!-- CRP C reactive Protein normal method -->
          <item>
            <linkId value="lab" />
            <text value="Laborwerte" />
            <type value="string" />
            <answerOption>
              <!-- diese Option wird am häufigsten gewählt: -->
              <initialSelected value="true" />
              <valueCoding>
                <system value="http://loinc.org" />
                <code value="1988-5" />
                <display value="C reactive protein [Mass/volume] in Serum or Plasma" />
              </valueCoding>
            </answerOption>
          </item>
          <item>
            <linkId value="lab" />
            <text value="Laborwerte" />
            <type value="string" />
            <answerOption>
              <valueCoding>
                <system value="http://loinc.org" />
                <code value="76485-2" />
                <display value="C reactive protein [Moles/volume] in Serum or Plasma" />
              </valueCoding>
            </answerOption>
          </item>
          <!-- CRP C reactive Protein High sensitivity method-->
          <item>
            <linkId value="lab" />
            <text value="Laborwerte" />
            <type value="string" />
            <answerOption>
              <valueCoding>
                <system value="http://loinc.org" />
                <code value="30522-7" />
                <display value="C reactive protein [Mass/volume] in Serum or Plasma by High sensitivity method" />
              </valueCoding>
            </answerOption>
          </item>
          <item>
            <linkId value="lab" />
            <text value="Laborwerte" />
            <type value="string" />
            <answerOption>
              <valueCoding>
                <system value="http://loinc.org" />
                <code value="76486-0" />
                <display value="C reactive protein [Moles/volume] in Serum or Plasma by High sensitivity method" />
              </valueCoding>
            </answerOption>
          </item>
        </item>
      </Questionnaire>
    </resource>
  </entry>
  <!-- serviceRequest -->
  <entry>
    <fullUrl value="http://test.fhir.ch/r4/ServiceRequest/referral-1-tvt" />
    <ServiceRequest xmlns="http://hl7.org/fhir">
      <id value="referral-1-tvt" />
      <meta>
        <profile value="http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-servicerequest" />
      </meta>
      <identifier>
        <!-- should be mandatory ?-->
        <!-- 0..1 Identifiers assigned to this order instance by the orderer and/or the receiver and/or order fulfiller. TODO -->
      </identifier>
      <status value="active" />
      <intent value="original-order" />
      <category>
        <!-- 0..* Classification of service, Service Request Category Codes (Example) -->
        <coding>
          <system value="http://snomed.info/sct" />
          <code value="108252007" />
        </coding>
        <text value="Laboratory procedure (procedure)" />
      </category>
      <priority value="urgent" /> <!-- 0..1 routine | urgent | asap | stat -->

      <subject>
        <reference value="Patient/HansGuggindiluft" />
      </subject>

      <encounter>
        <!-- 0..1 Reference(Encounter) Encounter in which the request was created -->
      </encounter>

      <occurrence>
        <!-- 0..1 dateTime|Period|Timing When service should occur -->
      </occurrence>

      <requester>
        <!-- 0..1 Reference(Practitioner|PractitionerRole|Organization|
          Patient|RelatedPerson|Device) Who/what is requesting service -->
        <reference value="Practitioner/MarcMustermann" />
      </requester>

      <performerType>
        <!-- 0..1 CodeableConcept Performer role -->
        <coding>
          <system value="http://snomed.info/sct" />
          <code value="61246008" />
        </coding>
        <text value="Laboratory medicine specialist (occupation)" />
      </performerType>

      <performer>
        <!-- 0..* Reference(Practitioner|PractitionerRole|Organization|
          CareTeam|HealthcareService|Patient|Device|RelatedPerson) Requested performer -->
        <reference value="Organisation/LaborPipette" />
      </performer>

      <locationCode>
        <!-- 0..* CodeableConcept Requested location -->
      </locationCode>

      <locationReference>
        <!-- 0..* Reference(Location) Requested location -->
      </locationReference>

      <reasonCode>
        <!-- 0..* CodeableConcept Explanation/Justification for procedure or service -->
        <coding>
          <system value="http://snomed.info/sct" />
          <code value=" 432805000 " />
        </coding>
        <text value="Suspected deep vein thrombosis (situation)" />
      </reasonCode>

      <reasonReference>
        <!-- 0..* Reference(Condition|Observation|DiagnosticReport|
          DocumentReference) Explanation/Justification for service or service -->
        <reference value="" />
      </reasonReference>

      <specimen>
        <!-- 0..* Reference(Specimen) Procedure Samples -->
        <reference value="specimen/serum.xml" />
        <reference value="specimen/blood.xml" />
        <reference value="specimen/blood-coag.xml" />
      </specimen>

      <insurance>
        <!-- 0..* Bsp. Covid19 Kostenträger; Reference(Coverage|ClaimResponse) Associated insurance coverage -->
      </insurance>

    </ServiceRequest>
  </entry>
</Bundle>
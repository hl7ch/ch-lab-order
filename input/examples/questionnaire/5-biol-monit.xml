<?xml version="1.0" encoding="UTF-8"?>

<Questionnaire xmlns="http://hl7.org/fhir">
  <id value="5-biol-monit" />
  <meta>
    <versionId value="1" />
    <lastUpdated value="2019-04-01T20:17:53.340+00:00" />
    <profile value="http://fhir.ch/ig/ch-orf/StructureDefinition/ch-orf-questionnaire" />
    <profile value="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire" />
    <profile value="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-extract" />
  </meta>

  <!-- extensions -->
  <extension url="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-targetStructureMap">
    <valueCanonical value="http://fhir.ch/ig/ch-orf/StructureMap/OrfQrToBundle" />
  </extension>
  <extension url="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext">
    <extension url="name">
      <valueId value="Bundle" />
    </extension>
    <extension url="type">
      <valueCode value="Bundle" />
    </extension>
    <extension url="description">
      <valueString value="The Bundle that is to be used to pre-populate the form" />
    </extension>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/variable">
    <valueExpression>
      <name value="Patient" />
      <language value="text/fhirpath" />
      <expression value="%Bundle.entry[0].resource.subject.resolve()" />
    </valueExpression>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/variable">
    <valueExpression>
      <name value="Orderer" />
      <language value="text/fhirpath" />
      <expression value="%Bundle.entry[0].resource.author.resolve().ofType(Practitioner)" />
    </valueExpression>
  </extension>

  <url value="http://fhir.ch/ig/ch-lab-order/Questionnaire/5-biol-monit" />
  <name value="LabOrderExample" />
  <title value="Lab Order Example" />
  <status value="draft" />
  <experimental value="true" />
  <subjectType value="Patient" />
  <date value="2018-04-12" />
  <publisher value="HL7 Switzerland" />

  <contact>
    <name value="HL7 Switzerland" />
    <telecom>
      <system value="url" />
      <value value="https://www.hl7.ch/" />
    </telecom>
  </contact>
  <jurisdiction>
    <coding>
      <system value="urn:iso:std:iso:3166" />
      <code value="CH" />
    </coding>
  </jurisdiction>
  <copyright value="CC-BY-SA-4.0" />

  <!-- item[0] 5-biol-monit Questionnaire Example: order -->
  <item>
    <linkId value="order" />
    <text value="Auftrag" />
    <type value="group" />
    <required value="true" />
    <item>
      <linkId value="order.placerOrderIdentifier" />
      <text value="Auftragsnummer des Auftraggebers" />
      <type value="string" />
    </item>
    <item>
      <extension url="http://hl7.org/fhir/StructureDefinition/questionnaire-hidden">
        <valueBoolean value="true" />
      </extension>
      <linkId value="order.placerOrderIdentifierDomain" />
      <text value="Identifier Domain der Auftragsnummer des Auftraggebers" />
      <type value="string" />
    </item>
    <item>
      <linkId value="order.IdentifiefillerOrderIdentifier" />
      <text value="Auftragsnummer des Auftragsempfängers" />
      <type value="string" />
    </item>

    <item>
      <extension url="http://hl7.org/fhir/StructureDefinition/questionnaire-hidden">
        <valueBoolean value="true" />
      </extension>
      <linkId value="order.IdentifiefillerOrderIdentifierDomain" />
      <text value="Identifier Domain der Auftragsnummer des Auftragsempfängers" />
      <type value="string" />
    </item>
    <item>
      <extension url="http://hl7.org/fhir/StructureDefinition/questionnaire-hidden">
        <valueBoolean value="true" />
      </extension>
      <linkId value="order.precedentDocumentIdentifier" />
      <text value="Identifier des Vorgängerdokuments" />
      <type value="string" />
    </item>
    <item>
      <linkId value="order.notificationContactDocument" />
      <text value="Dringender Benachrichtigungskontakt für dieses Dokument" />
      <type value="group" />
      <item>
        <linkId value="order.notificationContactDocument.practitioner" />
        <text value="Zu benachrichtigende Person" />
        <type value="group" />
        <item>
          <linkId value="order.notificationContactDocument.practitioner.title" />
          <text value="Titel" />
          <type value="string" />
        </item>
        <item>
          <linkId value="order.notificationContactDocument.practitioner.familyName" />
          <text value="Name" />
          <type value="string" />
        </item>
        <item>
          <linkId value="order.notificationContactDocument.practitioner.givenName" />
          <text value="Vorname" />
          <type value="string" />
        </item>
        <item>
          <linkId value="order.notificationContactDocument.practitioner.phone" />
          <text value="Telefon" />
          <type value="string" />
        </item>
        <item>
          <linkId value="order.notificationContactDocument.practitioner.email" />
          <text value="E-Mail" />
          <type value="string" />
        </item>
      </item>
    </item>
    <item>
      <linkId value="order.notificationContactDocumentResponse" />
      <text value="Dringender Benachrichtigungskontakt für die Antwort auf dieses Dokument" />
      <type value="group" />
      <item>
        <linkId value="order.notificationContactDocumentResponse.practitioner" />
        <text value="Zu benachrichtigende Person" />
        <type value="group" />
        <item>
          <linkId value="order.notificationContactDocumentResponse.practitioner.title" />
          <text value="Titel" />
          <type value="string" />
        </item>
        <item>
          <linkId value="order.notificationContactDocumentResponse.practitioner.familyName" />
          <text value="Name" />
          <type value="string" />
        </item>
        <item>
          <linkId value="order.notificationContactDocumentResponse.practitioner.givenName" />
          <text value="Vorname" />
          <type value="string" />
        </item>
        <item>
          <linkId value="order.notificationContactDocumentResponse.practitioner.phone" />
          <text value="Telefon" />
          <type value="string" />
        </item>
        <item>
          <linkId value="order.notificationContactDocumentResponse.practitioner.email" />
          <text value="E-Mail" />
          <type value="string" />
        </item>
      </item>
    </item>
    <item>
      <linkId value="order.priority" />
      <text value="Auftragspriorität" />
      <type value="choice" />
      <answerOption>
        <valueCoding>
          <system value="http://hl7.org/fhir/request-priority" />
          <code value="routine" />
          <display value="Routine" />
        </valueCoding>
        <initialSelected value="true" />
      </answerOption>
      <answerOption>
        <valueCoding>
          <system value="http://hl7.org/fhir/request-priority" />
          <code value="urgent" />
          <display value="Urgent" />
        </valueCoding>
      </answerOption>
      <answerOption>
        <valueCoding>
          <system value="http://hl7.org/fhir/request-priority" />
          <code value="asap" />
          <display value="ASAP" />
        </valueCoding>
      </answerOption>
      <answerOption>
        <valueCoding>
          <system value="http://hl7.org/fhir/request-priority" />
          <code value="stat" />
          <display value="STAT" />
        </valueCoding>
      </answerOption>
    </item>
  </item>

  <!-- item[1] 5-biol-monit Receiver: Person/organization who receives the request -->
  <item>
    <linkId value="receiver" />
    <text value="Empfänger" />
    <type value="group" />
    <item>
      <linkId value="receiver.practitioner" />
      <text value="Empfangende Person" />
      <type value="group" />
      <item>
        <linkId value="receiver.practitioner.title" />
        <text value="Titel" />
        <type value="string" />
      </item>
      <item>
        <linkId value="receiver.practitioner.familyName" />
        <text value="Name" />
        <type value="string" />
      </item>
      <item>
        <linkId value="receiver.practitioner.givenName" />
        <text value="Vorname" />
        <type value="string" />
      </item>
      <item>
        <linkId value="receiver.practitioner.gln" />
        <text value="GLN" />
        <type value="string" />
      </item>
      <item>
        <linkId value="receiver.practitioner.phone" />
        <text value="Telefon" />
        <type value="string" />
      </item>
      <item>
        <linkId value="receiver.practitioner.email" />
        <text value="E-Mail" />
        <type value="string" />
      </item>
    </item>
    <item>
      <linkId value="receiver.organization" />
      <text value="Empfangende Organisation" />
      <type value="group" />
      <item>
        <linkId value="receiver.organization.name" />
        <text value="Name der Organisation" />
        <type value="string" />
      </item>
      <item>
        <linkId value="receiver.organization.streetAddressLine" />
        <text value="Strasse, Hausnummer, Postfach etc." />
        <type value="string" />
        <repeats value="true" />
      </item>
      <item>
        <linkId value="receiver.organization.postalCode" />
        <text value="PLZ" />
        <type value="string" />
      </item>
      <item>
        <linkId value="receiver.organization.city" />
        <text value="Ort" />
        <type value="string" />
      </item>
      <item>
        <linkId value="receiver.organization.country" />
        <text value="Land" />
        <type value="string" />
      </item>
    </item>
  </item>

  <!-- item[2] Patient: The principle target of a particular Form Content is one patient -->
  <item>
    <linkId value="patient" />
    <text value="Patient" />
    <type value="group" />
    <item>
      <linkId value="patient.familyName" />
      <text value="Name" />
      <type value="string" />
    </item>
    <item>
      <linkId value="patient.maidenName" />
      <text value="Ledigname" />
      <type value="string" />
    </item>
    <item>
      <linkId value="patient.givenName" />
      <text value="Vorname" />
      <type value="string" />
    </item>
    <item>
      <linkId value="patient.localPid" />
      <text value="Lokale Patienten-ID" />
      <type value="string" />
    </item>
    <item>
      <linkId value="patient.birthDate" />
      <text value="Geburtsdatum" />
      <type value="date" />
    </item>
    <item>
      <linkId value="patient.gender" />
      <text value="Geschlecht" />
      <type value="choice" />
      <answerOption>
        <valueCoding>
          <system value="http://hl7.org/fhir/administrative-gender" />
          <code value="male" />
          <display value="Male" />
        </valueCoding>
        <initialSelected value="true" />
      </answerOption>
      <answerOption>
        <valueCoding>
          <system value="http://hl7.org/fhir/administrative-gender" />
          <code value="female" />
          <display value="Female" />
        </valueCoding>
      </answerOption>
      <answerOption>
        <valueCoding>
          <system value="http://hl7.org/fhir/administrative-gender" />
          <code value="other" />
          <display value="Other" />
        </valueCoding>
      </answerOption>
    </item>
    <item>
      <linkId value="patient.phone" />
      <text value="Telefon" />
      <type value="string" />
    </item>
    <item>
      <linkId value="patient.email" />
      <text value="E-Mail" />
      <type value="string" />
    </item>
    <item>
      <linkId value="patient.streetAddressLine" />
      <text value="Strasse, Hausnummer, Postfach etc." />
      <type value="string" />
      <repeats value="true" />
    </item>
    <item>
      <linkId value="patient.postalCode" />
      <text value="PLZ" />
      <type value="string" />
    </item>
    <item>
      <linkId value="patient.city" />
      <text value="Ort" />
      <type value="string" />
    </item>
    <item>
      <linkId value="patient.country" />
      <text value="Land" />
      <type value="string" />
    </item>
  </item>

  <!-- item[3] sender, sender.author-->
  <item>
    <linkId value="sender" />
    <text value="Absender" />
    <type value="group" />
    <required value="true" />
    <item>
      <linkId value="sender.author" />
      <text value="Verantwortlicher" />
      <type value="group" />
      <required value="true" />
      <item>
        <linkId value="sender.author.practitioner" />
        <text value="Verantwortliche Person" />
        <type value="group" />
        <item>
          <linkId value="sender.author.practitioner.title" />
          <text value="Titel" />
          <type value="string" />
        </item>
        <item>
          <linkId value="sender.author.practitioner.familyName" />
          <text value="Name" />
          <type value="string" />
        </item>
        <item>
          <linkId value="sender.author.practitioner.givenName" />
          <text value="Vorname" />
          <type value="string" />
        </item>
        <item>
          <linkId value="sender.author.practitioner.gln" />
          <text value="GLN" />
          <type value="string" />
        </item>
        <item>
          <linkId value="sender.author.practitioner.phone" />
          <text value="Telefon" />
          <type value="string" />
        </item>
        <item>
          <linkId value="sender.author.practitioner.email" />
          <text value="E-Mail" />
          <type value="string" />
        </item>
      </item>
      <item>
        <linkId value="sender.author.organization" />
        <text value="Verantwortliche Organisation" />
        <type value="group" />
        <item>
          <linkId value="sender.author.organization.name" />
          <text value="Name der Organisation" />
          <type value="string" />
        </item>
        <item>
          <linkId value="sender.author.organization.streetAddressLine" />
          <text value="Strasse, Hausnummer, Postfach etc." />
          <type value="string" />
          <repeats value="true" />
        </item>
        <item>
          <linkId value="sender.author.organization.postalCode" />
          <text value="PLZ" />
          <type value="string" />
        </item>
        <item>
          <linkId value="sender.author.organization.city" />
          <text value="Ort" />
          <type value="string" />
        </item>
        <item>
          <linkId value="sender.author.organization.country" />
          <text value="Land" />
          <type value="string" />
        </item>
      </item>
    </item>
    <item>
      <linkId value="sender.dataenterer" />
      <text value="Erfasser" />
      <type value="group" />
      <item>
        <linkId value="sender.dataenterer.practitioner" />
        <text value="Erfassende Person" />
        <type value="group" />
        <item>
          <linkId value="sender.dataenterer.practitioner.familyName" />
          <text value="Name" />
          <type value="string" />
        </item>
        <item>
          <linkId value="sender.dataenterer.practitioner.givenName" />
          <text value="Vorname" />
          <type value="string" />
        </item>
        <item>
          <linkId value="sender.dataenterer.practitioner.phone" />
          <text value="Telefon" />
          <type value="string" />
        </item>
        <item>
          <linkId value="sender.dataenterer.practitioner.email" />
          <text value="E-Mail" />
          <type value="string" />
        </item>
      </item>
    </item>
  </item>

  <!-- item[4] receiverCopies, e.g. Patient, other HC-Organisation -->
  <item>
    <linkId value="receiverCopies" />
    <text value="Kopieempfänger" />
    <type value="group" />
    <item>
      <linkId value="receiverCopy" />
      <text value="Kopieempfangende Organisation oder Person" />
      <type value="group" />
      <repeats value="true" />
      <item>
        <linkId value="receiverCopy.organization.name" />
        <text value="Name der Organisation" />
        <type value="string" />
      </item>
      <item>
        <linkId value="receiverCopy.title" />
        <text value="Titel" />
        <type value="string" />
      </item>
      <item>
        <linkId value="receiverCopy.familyName" />
        <text value="Name" />
        <type value="string" />
      </item>
      <item>
        <linkId value="receiverCopy.givenName" />
        <text value="Vorname" />
        <type value="string" />
      </item>
      <item>
        <linkId value="receiverCopy.phone" />
        <text value="Telefon" />
        <type value="string" />
      </item>
      <item>
        <linkId value="receiverCopy.email" />
        <text value="E-Mail" />
        <type value="string" />
      </item>
      <item>
        <linkId value="receiverCopy.streetAddressLine" />
        <text value="Strasse, Hausnummer, Postfach etc." />
        <type value="string" />
        <repeats value="true" />
      </item>
      <item>
        <linkId value="receiverCopy.postalCode" />
        <text value="PLZ" />
        <type value="string" />
      </item>
      <item>
        <linkId value="receiverCopy.city" />
        <text value="Ort" />
        <type value="string" />
      </item>
      <item>
        <linkId value="receiverCopy.country" />
        <text value="Land" />
        <type value="string" />
      </item>
    </item>
  </item>

  <!-- item[5] lab specialty, here: Biological Monitoring -->
  <item>
    <linkId value="hematology" />
    <text value="Hematology" />
    <type value="group" />
    <item>
      <linkId value="lab" />
      <text value="Laborwerte" />
      <type value="choice" />
      <repeats value="true" />
      <answerOption>
        <valueCoding>
          <system value="http://loinc.org" />
          <code value="24360-0" />
          <display value="Hemoglobin and Hematocrit panel - Blood" />
        </valueCoding>
      </answerOption>
      <answerOption>
        <valueCoding>
          <system value="http://loinc.org" />
          <code value="43113-0" />
          <display value="Hemoglobin electrophoresis panel in Blood" />
        </valueCoding>
      </answerOption>
      <answerOption>
        <valueCoding>
          <system value="http://loinc.org" />
          <code value="57021-8" />
          <display value="CBC W Auto Differential panel - Blood" />
        </valueCoding>
      </answerOption>
      <answerOption>
        <valueCoding>
          <system value="http://loinc.org" />
          <code value="58410-2" />
          <display value="CBC panel - Blood by Automated count" />
        </valueCoding>
      </answerOption>
      <answerOption>
        <valueCoding>
          <system value="http://loinc.org" />
          <code value="57023-4" />
          <display value="Auto Differential panel - Blood" />
        </valueCoding>
      </answerOption>
    </item>
  </item>

  <!-- item[6] Toxicology panel blood-->
  <item>
    <linkId value="toxicology" />
    <text value="Toxicology" />
    <type value="group" />
    <item>
      <linkId value="tox" />
      <text value="Toxic Content" />
      <type value="choice" />
      <repeats value="true" />
      <answerOption>
        <valueCoding>
          <system value="http://loinc.org" />
          <code value="29587-3" />
          <display value="Toxicology panel - Blood" />
        </valueCoding>
      </answerOption>
      <answerOption>
        <valueCoding>
          <system value="http://loinc.org" />
          <code value="54454-4" />
          <display value="Arsenic fractions panel - Urine" />
        </valueCoding>
      </answerOption>
      <answerOption>
        <valueCoding>
          <system value="http://loinc.org" />
          <code value="29589-9" />
          <display value="Heavy metals panel - Urine" />
        </valueCoding>
      </answerOption>
    </item>
  </item>
</Questionnaire>